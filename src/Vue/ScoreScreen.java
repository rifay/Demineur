/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Vue;

import Modele.GridBoard;
import Modele.Score;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.List;
import java.util.Map;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.SwingConstants;
import javax.swing.plaf.basic.BasicSplitPaneUI;

/**
 *
 * @author rifayath.david
 */
public class ScoreScreen extends javax.swing.JFrame {

    /**
     * Creates new form ScoreScreen
     */
    JLabel[] playerName = new JLabel[10];
    JLabel[] playerScore = new JLabel[10];
    private GridLayout gLayout;
    private JTabbedPane onglets;
    JPanel[] ongletsPanel = new JPanel[3];
    JLabel[] titreOnglet = new JLabel[3];
    JPanel jPanel1;

    public ScoreScreen(java.awt.Frame parent, boolean modal, GridBoard grille) {
        initComponents();
        initializeComponents();
        //if (grille.getEtatPartie() == grille.PARTIE_GAGNE) {
//        String name = JOptionPane.showInputDialog("Votre nom: ");
//        grille.sauvegarder(name);
//        //}
//        playerName = new JLabel[10];
//        playerScore = new JLabel[10];
//        /*gLayout = new GridLayout(10, 3);
//         jPanel1.setLayout(gLayout);
//         jPanel1.applyComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);*/
        afficherScore(grille);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 412, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 236, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents


    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables
    private void afficherScore(GridBoard grille) {
        Map<String, List<Score>> allScore = grille.getAllScore();
        int i = 0;
        for (Map.Entry<String, List<Score>> entrySet : allScore.entrySet()) {
            String key = entrySet.getKey();
            List<Score> listNiveau = entrySet.getValue();
            for (Score score : listNiveau) {
                playerName[i] = new JLabel();
                playerScore[i] = new JLabel();
                playerName[i].setText(score.getName());
                System.out.println(""+score.getName());
                //playerName[i].setHorizontalAlignment(SwingConstants.LEFT);
                DateFormat formatter = new SimpleDateFormat("mm:ss");
                playerScore[i].setText((formatter.format(score.getScore())));
                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridheight=1;
                
                gbc.ipady=10;
                gbc.ipadx=10;
                gbc.gridy =2*i;
                gbc.gridx = 0;
                gbc.anchor = GridBagConstraints.NORTH;
                 GridBagConstraints gbc2 = new GridBagConstraints();
               gbc2.gridheight=1;
               gbc2.anchor = GridBagConstraints.NORTH;
                gbc2.gridy =2*i;
                gbc2.gridx = 1;
                ongletsPanel[score.getNiveau() - 1].add(playerName[i], gbc);
                
                ongletsPanel[score.getNiveau() - 1].add(playerScore[i], gbc2);
                
                System.out.println("Dim panel : "+ongletsPanel[score.getNiveau() - 1].getSize());
                System.out.println("player label : "+playerName[i].getSize());
                i++;
            }
        }

    }

    private void initializeComponents() {
        this.setLayout(new GridLayout());
        jPanel1 = new JPanel();
        
        onglets = new JTabbedPane();
        onglets.setSize(new Dimension(1000, 1000));
        titreOnglet[0] = new JLabel("Score Facile");
        titreOnglet[1] = new JLabel("Score Moyen");
        titreOnglet[2] = new JLabel("Score Difficile");
        for (int i = 0; i < 3; i++) {
            ongletsPanel[i] = new JPanel(new GridBagLayout());
            
            ongletsPanel[i].setPreferredSize(new Dimension(300, 200));
            onglets.addTab(titreOnglet[i].getText(), ongletsPanel[i]);
        }
        jPanel1.add(onglets);
        this.getContentPane().add(jPanel1);
    }
}
